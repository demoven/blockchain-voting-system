<div class="create-container">
    <h2>Create New Vote</h2>
    @if (errorMessage) {
    <div class="error">{{ errorMessage }}</div>
    }

    <form [formGroup]="voteForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="subject">Subject</label>
            <input type="text" id="subject" formControlName="subject">
        </div>

        <div class="form-group">
            <label>Options</label>
            <div formArrayName="options">
                @for (option of options.controls; track $index) {
                <div class="option-input">
                    <input type="text" [formControlName]="$index" placeholder="Option {{$index + 1}}">
                    @if (options.length > 2) {
                    <button type="button" (click)="removeOption($index)" class="remove-btn">X</button>
                    }
                </div>
                }
            </div>
            <button type="button" (click)="addOption()" class="add-btn">+ Add Option</button>
        </div>

        <div class="form-group">
            <label for="voters">Allowed Voters (UIDs, comma separated)</label>
            <small>Leave empty for public vote</small>
            <textarea id="voters" formControlName="voters" rows="3"></textarea>
        </div>

        <div class="actions">
            <button type="submit" [disabled]="voteForm.invalid">Create Vote</button>
            <button type="button" (click)="goBack()" class="cancel-btn">Cancel</button>
        </div>
    </form>
</div>