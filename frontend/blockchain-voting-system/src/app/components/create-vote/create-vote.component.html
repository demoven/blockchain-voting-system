<div class="create-container">
    <h2>Create New Vote</h2>
    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

    <form (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="subject">Subject</label>
            <input type="text" id="subject" [(ngModel)]="subject" name="subject" required>
        </div>

        <div class="form-group">
            <label>Options</label>
            <div *ngFor="let option of options; let i = index; trackBy: trackByIndex" class="option-input">
                <input type="text" [(ngModel)]="options[i]" name="option{{i}}" placeholder="Option {{i+1}}" required>
                <button type="button" (click)="removeOption(i)" *ngIf="options.length > 2" class="remove-btn">X</button>
            </div>
            <button type="button" (click)="addOption()" class="add-btn">+ Add Option</button>
        </div>

        <div class="form-group">
            <label for="voters">Allowed Voters (UIDs, comma separated)</label>
            <small>Leave empty for public vote</small>
            <textarea id="voters" [(ngModel)]="votersInput" name="voters" rows="3"></textarea>
        </div>

        <div class="actions">
            <button type="submit" [disabled]="!isValid()">Create Vote</button>
            <button type="button" (click)="goBack()" class="cancel-btn">Cancel</button>
        </div>
    </form>
</div>